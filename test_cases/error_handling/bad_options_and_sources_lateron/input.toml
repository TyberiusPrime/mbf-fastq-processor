[input]
    read1 = 'input_read1.fq'

[input.options]
	fastq_readname_end_char = '|'

[output]
    prefix = 'output'

# First demultiplex by barcode
[[step]]
    action = 'ExtractRegion'
	source = "read1"
    anchor = "Start"
    start = 0
    len = 2
    out_label = 'barcode'


[[step]]
	action = "StoreTagInComment"
	in_label = 'barcode'

# Second demultiplex by boolean tag
[[step]]
    action = 'TagOtherFile'
    source = 'name:read1'
    out_label = 'in_other'
    filename = 'input_other_file.fq'
    false_positive_rate = 0
    seed = 42

[[step]]
	action = "StoreTagInComment"
	in_label = 'in_other'

[[step]]
    action = 'Demultiplex'
    in_label = 'barcode'
    output_unmatched = false
    barcodes = 'barcodes'

[barcodes.barcodes]
    AA = 'A'
    GG = 'B'

[[step]]
    action = 'Demultiplex'
    in_label = 'in_other'
    output_unmatched = false
