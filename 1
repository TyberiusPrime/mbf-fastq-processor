    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.09s
     Running unittests src/lib.rs (target/debug/deps/mbf_fastq_processor-3f3966ebf7f94f6e)

running 34 tests
test config::deser::tests::test_u8_from_char_or_number_empty_string ... ok
test config::deser::tests::test_u8_from_char_or_number_out_of_range_numbers ... ok
test config::deser::tests::test_u8_from_char_or_number_negative_numbers ... ok
test config::deser::tests::test_u8_from_char_or_number_valid_numbers ... ok
test config::deser::tests::test_u8_from_char_or_number_multi_character_string ... ok
test config::deser::tests::test_u8_from_char_or_number_valid_strings ... ok
test dna::test::test_find_iupac ... ok
test dna::test::test_iupac_hamming_distance ... ok
test dna::test::test_rev_complement ... ok
test io::test::test_cut_end_local ... ok
test dna::test::test_rev_complement_panics_on_newline - should panic ... ok
test io::test::test_cut_end_owned ... ok
test io::test::test_cut_start_local ... ok
test io::test::test_cut_start_owned ... ok
test io::test::test_fastq_block_combined_sanity_check_empty ... ok
test io::test::test_fastq_block_combined_sanity_check_r1_neq_i2 - should panic ... ok
test io::test::test_fastq_block_combined_sanity_check_r1_neq_output_tags - should panic ... ok
test io::test::test_fastq_block_combined_sanity_check_r1_neq_i1 - should panic ... ok
test io::test::test_fastq_block_combined_sanity_check_r1_neq_r2 - should panic ... ok
test io::test::test_fastq_block_is_empty ... ok
test io::test::test_fastq_blocks_combined_empty_is_empty ... ok
test io::test::test_longest_suffix_that_is_a_prefix ... ok
test io::test::test_maxlen ... ok
test io::test::test_postfix ... ok
test io::test::test_prefix ... ok
test io::test::test_replace_qual_local ... ok
test io::test::test_reverse_local ... ok
test io::test::test_reverse_owned ... ok
test io::test::test_trim_adapter_mismatch_tail_early_exit ... ok
test io::test::test_trim_poly_n_local ... ok
test io::test::test_trim_polybase_min_longer_than_seq ... ok
test io::test::test_trimm_poly_n ... ok
test io::test::test_wrapped_fastq_empty ... ok
test transformations::reports::common::tests::test_thousands_format ... ok

test result: ok. 34 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/main.rs (target/debug/deps/mbf_fastq_processor-00ec6ccb3dd13078)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/demultiplex.rs (target/debug/deps/demultiplex-1bafb176171c8c1e)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/generated.rs (target/debug/deps/generated-9a41fae90869a4aa)

running 254 tests
test test_case_edits_uppercase_sequence ... ok
test test_case_edits_lowercase_sequence ... ok
test test_case_demultiplex_simple_demultiplex_iupac ... ok
test test_case_demultiplex_simple_demultiplex_single_barcode ... ok
test test_case_demultiplex_simple_demultiplex_single_barcode_no_unmatched_output ... ok
test test_case_demultiplex_simple_demultiplex_hamming ... ok
test test_case_extraction_edits_altering_tag_locations_rev_complement ... ok
test test_case_extraction_edits_altering_tag_locations_cut_start_inside_tag ... ok
test test_case_demultiplex_simple_demultiplex_basics ... ok
test test_case_extraction_edits_altering_tag_locations_cut_end_inside_tag ... ok
test test_case_edits_uppercase_tag ... ok
test test_case_demultiplex_simple_demultiplex_no_unmatched ... ok
test test_case_demultiplex_simple_demultiplex_combined_outputs ... ok
test test_case_extraction_edits_altering_tag_locations_max_len_before_tag ... ok
test test_case_demultiplex_simple_demultiplex_iupac_hamming ... ok
test test_case_extraction_extract_gc_panic_on_store_in_seq ... ok
test test_case_edits_lowercase_tag ... ok
test test_case_extraction_edits_altering_tag_locations_trim_quality_start ... ok
test test_case_extraction_extract_filter_keep ... ok
test test_case_extraction_extract_gc_simple_test ... ok
test test_case_extraction_extract_anchor_leftmost_verification ... ok
test test_case_extraction_extract_growing ... ok
test test_case_extraction_edits_altering_tag_locations_max_len_inside_tag ... ok
test test_case_extraction_extract_filter_remove ... ok
test test_case_extraction_extract_label_must_not_be_empty ... ok
test test_case_extraction_edits_altering_tag_locations_prefix ... ok
test test_case_extraction_edits_altering_tag_locations_max_len_after_tag ... ok
test test_case_extraction_extract_anchor_simple ... ok
test test_case_extraction_edits_altering_tag_locations_extract_trim_end_false ... ok
test test_case_extraction_extract_gc_target_all_read1_only ... ok
test test_case_extraction_extract_anchor_too_far ... ok
test test_case_extraction_extract_gc_after_trim ... ok
test test_case_extraction_extract_length_panic_on_store_in_seq ... ok
test test_case_extraction_edits_altering_tag_locations_extract_trim_start_true ... ok
test test_case_extraction_extract_anchor_hamming ... ok
test test_case_extraction_extract_growing_from_nothing ... ok
test test_case_extraction_extract_n_count_panic_on_store_in_seq ... ok
test test_case_extraction_extract_anchor_too_far_left ... ok
test test_case_extraction_extract_highlight_regex ... ok
test test_case_extraction_extract_length_simple_test ... ok
test test_case_extraction_extract_highlight ... ok
test test_case_extraction_extract_regex_underscores ... ok
test test_case_extraction_extract_region_trim_at_tag_conflict ... ok
test test_case_extraction_extract_n_count_simple_test ... ok
test test_case_extraction_extract_length_after_trim ... ok
test test_case_extraction_edits_altering_tag_locations_extract_trim_end_true ... ok
test test_case_extraction_extract_region_and_replace_multiple ... ok
test test_case_extraction_extract_tag_duplicate_name_panics ... ok
test test_case_extraction_extract_n_count_after_trim ... ok
test test_case_extraction_extract_mean_quality_and_filter ... ok
test test_case_extraction_extract_tag_reserved_name_panics ... ok
test test_case_extraction_extract_n_count_target_all_read1_only ... ok
test test_case_extraction_extract_length_target_all_read1_only ... ok
test test_case_extraction_extract_tag ... ok
test test_case_extraction_filter_no_such_tag ... ok
test test_case_extraction_extract_regex ... ok
test test_case_extraction_extract_regex_underscores_ok_works ... ok
test test_case_extraction_extract_trim_end_false ... ok
test test_case_extraction_extract_region_beyond_read_len ... ok
test test_case_extraction_remove_nonexistant_tag ... ok
test test_case_extraction_extract_shrinking ... ok
test test_case_extraction_extract_tag_r2 ... ok
test test_case_extraction_edits_altering_tag_locations_extract_trim_start_false ... ok
test test_case_extraction_extract_trim_start_false ... ok
test test_case_extraction_extract_trim_end_true ... ok
test test_case_extraction_extract_region_beyond_read_len_and_trim ... ok
test test_case_extraction_use_removed_tag ... ok
test test_case_extraction_store_tags_in_tsv_validate_compression ... ok
test test_case_extraction_extract_trim_start_true ... ok
test test_case_extraction_store_tags_in_tsv ... ok
test test_case_extraction_umi_extract_store_in_all_read_names ... ok
test test_case_extraction_extract_gc_target_all_full_data ... ok
test test_case_input_validation_barcode_outputs_not_named_no_barcode ... ok
test test_case_extraction_store_tags_in_tsv_gz ... ok
test test_case_extraction_umi_extract ... ok
test test_case_extraction_extract_tag_i1_i2 ... ok
test test_case_input_validation_cli_invalid_command ... ok
test test_case_input_validation_broken_newline ... ok
test test_case_input_validation_broken_newline2 ... ok
test test_case_extraction_extract_length_target_all_full_data ... ok
test test_case_head_early_termination_head_stops_reading ... ok
test test_case_extraction_extract_n_count_target_all_full_data ... ok
test test_case_head_early_termination_head_before_quantify ... ok
test test_case_input_validation_dna_validation_count_oligos_non_agtc ... ok
test test_case_head_early_termination_head_before_report ... ok
test test_case_head_early_termination_multi_stage_head_report_bottom ... ok
test test_case_head_early_termination_multi_stage_head ... ok
test test_case_extraction_umi_extract_with_existing_comment ... ok
test test_case_head_early_termination_multi_stage_head_report_middle ... ok
test test_case_input_validation_broken_panics ... ok
test test_case_head_early_termination_multi_stage_head_report_middle_bottom ... ok
test test_case_input_validation_dna_validation_count_oligos_non_empty ... ok
test test_case_input_validation_extract_iupac_suffix_min_length_too_high ... ok
test test_case_input_validation_interleave_no_read2 ... FAILED
test test_case_input_validation_extract_iupac_suffix_too_many_mismatches ... ok
test test_case_input_validation_empty_name_input ... ok
test test_case_input_validation_convert_phred_raises ... ok
test test_case_input_validation_help ... ok
test test_case_input_validation_input_read2_interleaved_conflict ... FAILED
test test_case_input_validation_invalid_base_or_dot ... ok
test test_case_input_validation_extract_tag_from_i1_i2_no_i1_i2 ... ok
test test_case_input_validation_invalid_base_or_dot_too_long ... ok
test test_case_input_validation_index2_file_does_not_exist ... ok
test test_case_head_early_termination_head_stops_reading_multiple ... ok
test test_case_input_validation_invalid_base ... ok
test test_case_input_validation_extract_tag_i1_i2_but_not_output ... ok
test test_case_input_validation_invalid_compression_levels_inspect_zstd_level_zero ... ok
test test_case_input_validation_invalid_compression_levels_output_gzip_level_too_high ... ok
test test_case_input_validation_invalid_compression_levels_output_zstd_level_too_high ... ok
test test_case_input_validation_invalid_compression_levels_output_zstd_level_zero ... ok
test test_case_input_validation_invalid_compression_levels_raw_with_compression_level ... ok
test test_case_input_validation_index1_file_does_not_exist ... ok
test test_case_input_validation_invalid_compression_levels_inspect_gzip_level_too_high ... ok
test test_case_input_validation_mismatched_seq_qual_len_2nd_read_qual_too_short ... ok
test test_case_input_validation_existing_unwritable_output_file ... ok
test test_case_input_validation_missing_input_file ... ok
test test_case_input_validation_mismatched_seq_qual_len_1st_read_qual_too_short ... ok
test test_case_input_validation_mismatched_seq_qual_len_2nd_read_qual_too_long ... ok
test test_case_input_validation_mismatched_seq_qual_len_1st_read_qual_too_long ... ok
test test_case_input_validation_only_one_demultiplex ... ok
test test_case_input_validation_read1_empty_list ... ok
test test_case_input_validation_no_newline_at_end_ok ... ok
test test_case_input_validation_read1_len_neq_index2_len ... ok
test test_case_input_validation_read1_file_does_not_exist ... ok
test test_case_input_validation_prefix_len_mismatch ... ok
test test_case_input_validation_postfix_len_mismatch ... ok
test test_case_input_validation_read1_len_neq_index1_len ... ok
test test_case_input_validation_read1_not_a_string ... ok
test test_case_input_validation_no_newline_and_truncated_qual ... ok
test test_case_input_validation_read2_not_a_string ... ok
test test_case_input_validation_repeated_filenames_index1 ... ok
test test_case_input_validation_repeated_filenames ... ok
test test_case_input_validation_read2_file_does_not_exist ... ok
test test_case_input_validation_read2_but_not_read1_set ... ok
test test_case_input_validation_read1_len_neq_read2_len ... ok
test test_case_input_validation_report_but_no_report_step_json ... ok
test test_case_input_validation_repeated_filenames_index2 ... ok
test test_case_input_validation_old_cli_not_existant_file ... ok
test test_case_input_validation_report_names_distinct ... ok
test test_case_input_validation_permission_denied_input_file ... ok
test test_case_input_validation_report_but_no_report_step_html ... ok
test test_case_extraction_edits_altering_tag_locations_swap_r1_and_r2 ... ok
test test_case_input_validation_repeated_filenames_one_key ... ok
test test_case_input_validation_permission_denied_read1 ... ok
test test_case_input_validation_two_mistakes_eserde ... ok
test test_case_input_validation_u8_from_char_number_to_large ... ok
test test_case_input_validation_stdout_conflict ... ok
test test_case_input_validation_u8_from_char_too_many_chars ... ok
test test_case_input_validation_store_tags_in_table_no_tags_defined ... ok
test test_case_input_validation_truncated_after_at ... ok
test test_case_input_validation_two_mistakes_post_deserialization ... ok
test test_case_input_validation_validate_regex_fail ... ok
test test_case_integration_tests_cat ... ok
test test_case_integration_tests_convert_phred ... ok
test test_case_integration_tests_cut_end ... ok
test test_case_integration_tests_cut_start ... ok
test test_case_integration_tests_convert_phred_multi ... ok
test test_case_integration_tests_filter_empty ... ok
test test_case_integration_tests_filter_avg_quality ... ok
test test_case_integration_tests_filter_max_len ... ok
test test_case_integration_tests_extract_iupac_suffix ... ok
test test_case_integration_tests_filter_min_len ... ok
test test_case_integration_tests_filter_empty_all ... ok
test test_case_integration_tests_filter_too_many_n ... ok
test test_case_integration_tests_filter_qualified_bases ... ok
test test_case_integration_tests_filter_too_many_n_all ... ok
test test_case_integration_tests_filter_empty_segments ... ok
test test_case_integration_tests_filter_too_many_n_segments_vs_all ... ok
test test_case_integration_tests_hash_output_both ... ok
test test_case_integration_tests_head_with_index ... ok
test test_case_integration_tests_hash_output_compressed ... ok
test test_case_integration_tests_head_with_index_and_demultiplex ... ok
test test_case_integration_tests_inspect_compression_zstd_level ... ok
test test_case_integration_tests_gz_input ... ok
test test_case_integration_tests_filter_other_file_by_name_keep ... ok
test test_case_integration_tests_input_interleaved_test_premature_termination ... FAILED
test test_case_integration_tests_filter_other_file_by_seq_keep ... ok
test test_case_integration_tests_inspect_read1 ... ok
test test_case_integration_tests_interleaved_must_have_even_block_size ... FAILED
test test_case_integration_tests_dedup_keep_duplicates ... ok
test test_case_integration_tests_inspect_index1 ... ok
test test_case_integration_tests_input_interleaved ... FAILED
test test_case_integration_tests_low_complexity_filter ... ok
test test_case_integration_tests_inspect_index2 ... ok
test test_case_integration_tests_max_len ... ok
test test_case_integration_tests_noop ... ok
test test_case_integration_tests_noop_minimal ... ok
test test_case_integration_tests_inspect_read2 ... ok
test test_case_integration_tests_old_cli_format ... ok
test test_case_integration_tests_output_different_suffix ... ok
test test_case_integration_tests_output_compression_gzip_level ... ok
test test_case_integration_tests_output_neither_r1_nor_r2 ... ok
test test_case_integration_tests_output_neither_r1_nor_r2_but_index ... ok
test test_case_integration_tests_output_neither_r1_nor_r2_but_index2 ... ok
test test_case_integration_tests_interleaved_output ... ok
test test_case_integration_tests_output_r1_only ... ok
test test_case_integration_tests_output_r2_only ... ok
test test_case_integration_tests_prefix_and_postfix ... ok
test test_case_integration_tests_quality_base_replacement ... ok
test test_case_integration_tests_rename_regex ... ok
test test_case_integration_tests_quantify_regions_simple ... ok
test test_case_integration_tests_rename_regex_gets_longer ... ok
test test_case_integration_tests_filter_other_file_by_name_remove ... ok
test test_case_integration_tests_rename_regex_shorter ... ok
test test_case_integration_tests_reverse_complement ... ok
test test_case_integration_tests_skip ... ok
test test_case_integration_tests_subsample ... ok
test test_case_integration_tests_order_maintained_in_single_core_transforms ... ok
test test_case_integration_tests_filter_other_file_by_seq_remove_bam ... ok
test test_case_integration_tests_filter_other_file_by_seq_remove_bam_unaligned ... ok
test test_case_integration_tests_trim_poly_tail_detail ... ok
test test_case_integration_tests_trim_poly_tail_detail_g ... ok
test test_case_integration_tests_trim_poly_tail_long ... ok
test test_case_integration_tests_trim_qual_end ... ok
test test_case_integration_tests_trim_poly_tail_n ... ok
test test_case_integration_tests_trim_qual_start ... ok
test test_case_integration_tests_mega_long_reads ... ok
test test_case_integration_tests_zstd_input_read_swap_no_read2 ... ok
test test_case_integration_tests_very_long_reads ... ok
test test_case_integration_tests_stdout_output ... ok
test test_case_reports_oligo_counts ... ok
test test_case_integration_tests_filter_other_file_by_seq_remove ... ok
test test_case_head_early_termination_multi_stage_head_report_top ... ok
test test_case_integration_tests_stdout_output_interleaved ... ok
test test_case_reports_oligo_counts_2 ... ok
test test_case_reports_read_length_reporting ... ok
test test_case_reports_report ... ok
test test_case_integration_tests_filter_other_file_by_name_remove_bam_unaligned_no_ignore ... ok
test test_case_reports_report_depduplication_per_fragment ... ok
test test_case_integration_tests_filter_other_file_by_name_remove_bam_unaligned ... ok
test test_case_reports_report_no_output ... ok
test test_case_integration_tests_filter_other_file_by_seq_remove_bam_unaligned_no_ignore ... ok
test test_case_validation_validate_phred ... ok
test test_case_validation_validate_phred_fail ... ok
test test_case_validation_validate_seq ... ok
test test_case_validation_validate_seq_fail ... ok
test test_case_integration_tests_zstd_input ... ok
test test_case_integration_tests_zstd_input_gzip_output ... ok
test test_case_integration_tests_zstd_input_zst_output ... ok
test test_case_integration_tests_filter_other_file_by_name_remove_bam ... ok
test test_case_integration_tests_zstd_input_read_swap ... ok
test test_case_reports_duplication_count_is_stable ... ok
test test_case_integration_tests_inspect_read1_compressed ... ok
test test_case_head_early_termination_head_after_quantify ... ok
test test_case_head_early_termination_head_after_report ... ok
test test_case_integration_tests_dedup ... ok
test test_case_integration_tests_dedup_read_combo ... ok
test test_case_integration_tests_dedup_exact ... ok
test test_case_integration_tests_dedup_read2 ... ok
test test_case_reports_report_pe ... ok
test test_case_integration_tests_gzip_blocks_spliting_reads ... ok
test test_case_integration_tests_dedup_read_combo_incl_index ... ok
test test_case_integration_tests_quantify_regions_multi ... ok
test test_case_integration_tests_interleaved_output_demultiplex ... ok

failures:

---- test_case_input_validation_interleave_no_read2 stdout ----
Test case is in: test_cases/input_validation/interleave_no_read2

thread 'test_case_input_validation_interleave_no_read2' panicked at tests/test_runner.rs:22:9:
Test failed "test_cases/input_validation/interleave_no_read2" Setup test dir

Caused by:
    0: copy input file
    1: No such file or directory (os error 2)
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_case_input_validation_input_read2_interleaved_conflict stdout ----
Test case is in: test_cases/input_validation/input_read2_interleaved_conflict

thread 'test_case_input_validation_input_read2_interleaved_conflict' panicked at tests/test_runner.rs:22:9:
Test failed "test_cases/input_validation/input_read2_interleaved_conflict" mbf-fastq-processor did not panic as expected.
Expected panic: If interleaved is set, read2 must not be set
Actual stderr: 'Unfortunatly an error was detected and lead to an early exit.

Details: Error opening input files

Caused by:
    0: Problem with read1 file
    1: Could not open file "sample_data/ERR12828869_10k_1.fq.zst"
    2: No such file or directory (os error 2)
'

---- test_case_integration_tests_input_interleaved_test_premature_termination stdout ----
Test case is in: test_cases/integration_tests/input_interleaved_test_premature_termination

thread 'test_case_integration_tests_input_interleaved_test_premature_termination' panicked at tests/test_runner.rs:22:9:
Test failed "test_cases/integration_tests/input_interleaved_test_premature_termination" 	output files failed verification.
	- Expected output file not created: test_cases/integration_tests/input_interleaved_test_premature_termination/output_2.fq
	- /tmp/nix-shell.3G1lcT/.tmpLbVJmP/output_1.fq (mismatched)


---- test_case_integration_tests_interleaved_must_have_even_block_size stdout ----
Test case is in: test_cases/integration_tests/interleaved_must_have_even_block_size

thread 'test_case_integration_tests_interleaved_must_have_even_block_size' panicked at tests/test_runner.rs:22:9:
Test failed "test_cases/integration_tests/interleaved_must_have_even_block_size" mbf-fastq-processor did not panic as expected.
Expected panic: Block size must be even for interleaved input.
Actual stderr: 'Unfortunatly an error was detected and lead to an early exit.

Details: Error opening input files

Caused by:
    0: Problem with read1 file
    1: Could not open file "sample_data/interleaved.fq.zst"
    2: No such file or directory (os error 2)
'

---- test_case_integration_tests_input_interleaved stdout ----
Test case is in: test_cases/integration_tests/input_interleaved

thread 'test_case_integration_tests_input_interleaved' panicked at tests/test_runner.rs:22:9:
Test failed "test_cases/integration_tests/input_interleaved" 	output files failed verification.
	- Expected output file not created: test_cases/integration_tests/input_interleaved/output_2.fq
	- /tmp/nix-shell.3G1lcT/.tmpxGLUO9/output_1.fq (mismatched)



failures:
    test_case_input_validation_input_read2_interleaved_conflict
    test_case_input_validation_interleave_no_read2
    test_case_integration_tests_input_interleaved
    test_case_integration_tests_input_interleaved_test_premature_termination
    test_case_integration_tests_interleaved_must_have_even_block_size

test result: FAILED. 249 passed; 5 failed; 0 ignored; 0 measured; 0 filtered out; finished in 1.63s

error: test failed, to rerun pass `--test generated`
